<ng-template #template_add>
    <div class="modal-header">
        <h4 class="modal-title pull-left">添加产品</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="productForm">
            <div class="form-group">
                <label for="id">ID</label>
                <input type="text" class="form-control" id="id" name="id" [formControl]='id'>
                <label for="ProductName">ProductName</label>
                <input type="text" class="form-control" id="ProductName" name="ProductName" [formControl]='ProductName'>
                <label for="Description">Description</label>
                <input type="text" class="form-control" id="Description" name="Description" [formControl]='Description'>
            </div>
        </form>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-success btn-lg" (click)="add();modalRef.hide()">添加</button>
        </div>
    </div>
</ng-template>

<ng-template #template_delete>
    <div class="modal-header">
        <h4 class="modal-title pull-left">是否要删除</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-danger btn-lg" (click)="delete();modalRef.hide()">确定</button>
            <button type="button" class="btn btn-outline-dark btn-lg" (click)="modalRef.hide()">取消</button>
        </div>
    </div>
</ng-template>

<ng-template #template_update>
    <div class="modal-header">
        <h4 class="modal-title pull-left">修改产品</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide() ">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="productForm">
            <div class="form-group">
                <label for="id">ID号</label>
                <input type="text" class="form-control" id="id" name="id" [formControl]='id'>
                <label for="ProductName">ProductName</label>
                <input type="text" class="form-control" id="ProductName" name="ProductName" [formControl]='ProductName'>
                <label for="ProductKey">ProductKey</label>
                <input type="text" class="form-control" id="ProductKey" name="ProductKey" [formControl]='ProductKey'>
                <label for="Description">Description</label>
                <input type="text" class="form-control" id="Description" name="Description" [formControl]='Description'>
            </div>
        </form>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-warning btn-lg" (click)="update();modalRef.hide()">修改</button>
        </div>
    </div>
</ng-template>

<ng-template #template_search>
    <div class="modal-header">
        <h4 class="modal-title pull-left">查询产品</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="productForm">
            <div class="form-group">
                <label for="id">输入查询产品的ID号：</label>
                <input type="text" class="form-control" id="id" name="id" [formControl]='id'>
            </div>
        </form>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-info btn-lg" (click)="search();modalRef.hide()">查询</button>
        </div>
    </div>
</ng-template>

<div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center ">
    <div class="my-3 p-3 bg-light rounded shadow-sm">
        <div class="text-center">
            <h4>Aliyun产品表</h4>
        </div>
        <div>
            <div>
                <table id="devTable" class="table table-bordered table-dark text-center">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">ProductName</th>
                            <th scope="col">ProductKey</th>
                            <th scope="col">Description</th>
                            <!-- <th scope="col">选中状态</th> -->
                            <th scope="col">删除产品</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor='let product of products$ | async;' (click)="select(product)">
                            <th scope="row">{{product.id}}</th>
                            <td>{{product.ProductName}}</td>
                            <td>{{product.ProductKey}}</td>
                            <td>{{product.Description}}</td>
                            <!-- <td>
                                <input type="radio" class="form-check-input" name="option"><label>选中</label>
                            </td> -->
                            <td>
                                <button type="button" class="btn btn-outline-danger btn-block"
                                    (click)="openModal(template_delete)" style="border: none">删除</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- 功能实现区域 -->
        <div class="text-right">
            <div class="col-auto my-1">
                <button style="width: 10rem;" class="btn btn-success btn-lg mx-2"
                    (click)="openModal(template_add)">新增产品</button>
                <button style="width: 10rem;" class="btn btn-warning btn-lg mx-2"
                    (click)="openModal(template_update)">修改产品</button>
                <button style="width: 10rem;" class="btn btn-info btn-lg mx-2"
                    (click)="openModal(template_search)">查询产品</button>
            </div>
        </div>
    </div>
</div>